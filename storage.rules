rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Static image corpus - public read, no client writes
    // These are the original AI-generated images for voting
    match /images/{imageId} {
      allow read: if true;
      allow write: if false;  // Admin SDK only (via scripts)
    }

    // Generated "imagined" scenes - public read for gallery/sharing
    // Created by imagineScenes Cloud Function using Admin SDK
    match /imagined/{imageId} {
      allow read: if true;
      allow write: if false;  // Cloud Function uses Admin SDK
    }

    // User uploads - disabled for now (no user upload feature)
    // If enabled in future, add auth + size limits:
    // match /uploads/{userId}/{allPaths=**} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null
    //                && request.auth.uid == userId
    //                && request.resource.size < 5 * 1024 * 1024  // 5MB limit
    //                && request.resource.contentType.matches('image/.*');
    // }

    // Default: deny all other paths
    match /{allPaths=**} {
      allow read: if false;
      allow write: if false;
    }
  }
}
